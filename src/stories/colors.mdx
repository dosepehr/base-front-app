import { Meta, ColorPalette, ColorItem } from '@storybook/addon-docs/blocks';

<Meta title='ui/Colors' />

<h2>All Theme Colors</h2>

{['light', 'dark'].map((theme) => (

<div key={theme}>
    <h3 style={{ marginTop: '1rem' }}>{theme.toUpperCase()} Theme</h3>
    <div
        style={{
            display: 'grid',
            gridTemplateColumns: 'repeat(4, minmax(0, 1fr))',
            gap: '1rem',
            background: 'transparent',
        }}
        data-theme={theme}
    >
        {[
            {
                name: 'Primary',
                var: '--color-primary',
                content: '--color-primary-content',
            },
            {
                name: 'Secondary',
                var: '--color-secondary',
                content: '--color-secondary-content',
            },
            {
                name: 'Accent',
                var: '--color-accent',
                content: '--color-accent-content',
            },
            {
                name: 'Neutral',
                var: '--color-neutral',
                content: '--color-neutral-content',
            },
            {
                name: 'Info',
                var: '--color-info',
                content: '--color-info-content',
            },
            {
                name: 'Success',
                var: '--color-success',
                content: '--color-success-content',
            },
            {
                name: 'Warning',
                var: '--color-warning',
                content: '--color-warning-content',
            },
            {
                name: 'Error',
                var: '--color-error',
                content: '--color-error-content',
            },
            {
                name: 'Base Content',
                var: '--color-base-100',
                content: '--color-base-content',
            },
        ].map(({ name, var: bgVar, content }) => (
            <div
                key={name}
                style={{
                    backgroundColor: `var(${bgVar})`,
                    color: content ? `var(${content})` : '#fff',
                    display: 'flex',
                    alignItems: 'center',
                    justifyContent: 'center',
                    height: '80px',
                    borderRadius: '0.5rem',
                    fontWeight: 'bold',
                    border: '1px solid #ddd',
                    textAlign: 'center',
                    padding: '0 0.5rem',
                }}
            >
                {name}
            </div>
        ))}
    </div>
</div>
))}

<div
    style={{
      display: 'flex',
      flexDirection: 'column',
      gap: '3rem',
      marginTop: '1.5rem',
    }}
>
    {(() => {
      const colors = [
        {
          name: 'primary',
          shades: [
            '--color-primary-50',
            '--color-primary-100',
            '--color-primary-200',
            '--color-primary-300',
            '--color-primary-400',
            '--color-primary-500',
            '--color-primary-600',
            '--color-primary-700',
            '--color-primary-800',
            '--color-primary-900',
          ],
        },
        {
          name: 'secondary',
          shades: [
            '--color-secondary-50',
            '--color-secondary-100',
            '--color-secondary-200',
            '--color-secondary-300',
            '--color-secondary-400',
            '--color-secondary-500',
            '--color-secondary-600',
            '--color-secondary-700',
            '--color-secondary-800',
            '--color-secondary-900',
          ],
        },
        {
          name: 'accent',
          shades: [
            '--color-accent-50',
            '--color-accent-100',
            '--color-accent-200',
            '--color-accent-300',
            '--color-accent-400',
            '--color-accent-500',
            '--color-accent-600',
            '--color-accent-700',
            '--color-accent-800',
            '--color-accent-900',
          ],
        },
        {
          name: 'neutral',
          shades: [
            '--color-neutral-50',
            '--color-neutral-100',
            '--color-neutral-200',
            '--color-neutral-300',
            '--color-neutral-400',
            '--color-neutral-500',
            '--color-neutral-600',
            '--color-neutral-700',
            '--color-neutral-800',
            '--color-neutral-900',
          ],
        },
      ];

      const getHexFromVar = (cssVar) => {
        const el = document.createElement('div');
        el.style.color = `var(${cssVar})`;
        document.body.appendChild(el);
        const rgb = getComputedStyle(el).color;
        document.body.removeChild(el);

        const match = rgb.match(/\d+/g);
        if (!match) return rgb;
        const hex = match
          .slice(0, 3)
          .map((v) => Number(v).toString(16).padStart(2, '0'))
          .join('');
        return `#${hex}`;
      };

      const getReadableTextColor = (hex) => {
        const rgb = parseInt(hex.slice(1), 16);
        const r = (rgb >> 16) & 255;
        const g = (rgb >> 8) & 255;
        const b = rgb & 255;
        const brightness = (r * 299 + g * 587 + b * 114) / 1000;
        return brightness > 150 ? '#000' : '#fff';
      };

      return colors.map((color) => (
        <div key={color.name}>
          <h4 style={{ marginBottom: '1rem', textTransform: 'capitalize' }}>
            {color.name}
          </h4>
          <div
            style={{
              display: 'grid',
              gridTemplateColumns: 'repeat(auto-fill, minmax(100px, 1fr))',
              gap: '1rem',
            }}
          >
            {color.shades.map((variable) => {
              const hex = getHexFromVar(variable);
              const textColor = getReadableTextColor(hex);
              return (
                <div
                  key={variable}
                  style={{
                    background: `var(${variable})`,
                    color: textColor,
                    borderRadius: '8px',
                    height: '80px',
                    display: 'flex',
                    alignItems: 'center',
                    justifyContent: 'center',
                    fontWeight: 'bold',
                    border: '1px solid #ddd',
                    textShadow: '0 0 2px rgba(0,0,0,0.2)',
                    transition: 'all 0.3s',
                  }}
                >
                  {hex}
                </div>
              );
            })}
          </div>
        </div>
      ));
    })()}
</div>
